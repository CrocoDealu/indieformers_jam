[gd_scene load_steps=21 format=3 uid="uid://dqbgvyawk1xgc"]

[ext_resource type="PackedScene" uid="uid://bc67rqfvqupjs" path="res://scenes/first_level.tscn" id="1_e1cbu"]
[ext_resource type="PackedScene" uid="uid://dvup5cw1gryvm" path="res://scenes/movable_entity.tscn" id="2_pw63i"]
[ext_resource type="PackedScene" uid="uid://ciuobid518833" path="res://scenes/enemy_body.tscn" id="4_6wevv"]
[ext_resource type="Script" uid="uid://4kf71r73t8j" path="res://scripts/ui/AlertContainer.gd" id="4_pu3yx"]
[ext_resource type="Script" uid="uid://cmqsp1u665h03" path="res://scripts/ui/PlayerQualitiesInfoControl.gd" id="5_c1pb6"]
[ext_resource type="Shader" uid="uid://bcmen73st1qru" path="res://assets/shaders/invert_fullscreen.gdshader" id="5_gubc5"]
[ext_resource type="PackedScene" uid="uid://bf78yixnvl7yg" path="res://scenes/bullet_scene.tscn" id="5_mngbo"]
[ext_resource type="Script" uid="uid://bulh4ap4ic88v" path="res://scripts/ui/UiController.gd" id="6_4w45t"]
[ext_resource type="Script" uid="uid://cuwpuqt5bylf0" path="res://scripts/ui/InvertEffectManager.gd" id="6_rt2n2"]
[ext_resource type="AudioStream" uid="uid://rqjmjqbufh84" path="res://assets/sounds/disabled_direction.wav" id="7_c16ls"]
[ext_resource type="Texture2D" uid="uid://41cjlmw821b5" path="res://assets/Sprite-0006.png" id="8_mngbo"]
[ext_resource type="Texture2D" uid="uid://cxtbm14cixws6" path="res://assets/solider_animations/Arrow01(32x32).png" id="9_e1cbu"]
[ext_resource type="Texture2D" uid="uid://86pbqls4c0b3" path="res://assets/progress_bars.png" id="10_mngbo"]

[sub_resource type="CompressedTexture2D" id="CompressedTexture2D_f412j"]
load_path = "res://.godot/imported/Soldier.png-df8ce7c3aef599e55e465baf8a8fb940.ctex"

[sub_resource type="AtlasTexture" id="AtlasTexture_mngbo"]
atlas = SubResource("CompressedTexture2D_f412j")
region = Rect2(41, 39, 15, 18)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_7ykc4"]
size = Vector2(9, 16)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_rt2n2"]
shader = ExtResource("5_gubc5")
shader_parameter/strength = 0.0

[sub_resource type="AtlasTexture" id="AtlasTexture_4w45t"]
atlas = ExtResource("10_mngbo")
region = Rect2(2, 3, 79, 9)

[sub_resource type="AtlasTexture" id="AtlasTexture_r6p65"]
atlas = ExtResource("10_mngbo")
region = Rect2(103, 3, 79, 9)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_r6p65"]
bg_color = Color(0.121569, 0.12549, 0.152941, 0.72549)

[node name="Node2D" type="Node2D"]

[node name="Game" type="Node" parent="."]

[node name="Level" parent="Game" instance=ExtResource("1_e1cbu")]
initial_position = Vector2(-1012, -30)
is_tutorial = true

[node name="Player" parent="Game" instance=ExtResource("2_pw63i")]
position = Vector2(-1012, -30)
jump_action = "ui_up"
jump_duration = 0.4
entity_texture = SubResource("AtlasTexture_mngbo")
collision_shape = SubResource("RectangleShape2D_7ykc4")
arrival_radius = 4.0
air_hold_time = 0.7
spin_speed_deg = 720.0

[node name="Camera2D" type="Camera2D" parent="Game/Player"]
zoom = Vector2(4, 4)

[node name="Enemy" parent="Game" instance=ExtResource("4_6wevv")]
position = Vector2(45, -11)
move_speed = 100.0
bullet_scene = ExtResource("5_mngbo")
enemy_health = 30
player_path = NodePath("../Player")

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="ColorRect" type="ColorRect" parent="CanvasLayer"]
material = SubResource("ShaderMaterial_rt2n2")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(1, 1, 1, 0)

[node name="Ui" type="CanvasLayer" parent="."]

[node name="Control" type="Control" parent="Ui"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("6_4w45t")

[node name="Alert" type="Control" parent="Ui/Control"]
layout_mode = 1
anchors_preset = 10
anchor_right = 1.0
grow_horizontal = 2

[node name="VBoxContainer" type="VBoxContainer" parent="Ui/Control/Alert"]
visible = false
layout_mode = 1
anchors_preset = 5
anchor_left = 0.5
anchor_right = 0.5
offset_left = -20.0
offset_right = 20.0
offset_bottom = 40.0
grow_horizontal = 2
alignment = 1
script = ExtResource("4_pu3yx")

[node name="GlitchInfo" type="Label" parent="Ui/Control/Alert/VBoxContainer"]
layout_mode = 2
theme_override_font_sizes/font_size = 24
text = "A is bugging"
horizontal_alignment = 1
vertical_alignment = 1

[node name="HBoxContainer" type="HBoxContainer" parent="Ui/Control/Alert/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3
alignment = 1

[node name="Label" type="Label" parent="Ui/Control/Alert/VBoxContainer/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 1
text = "Time Left:"
horizontal_alignment = 1
vertical_alignment = 1

[node name="TimeRemainingLabel" type="Label" parent="Ui/Control/Alert/VBoxContainer/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 1
text = "0s"
horizontal_alignment = 2
vertical_alignment = 1

[node name="UiInfo" type="Control" parent="Ui/Control"]
layout_mode = 1
anchor_top = 0.75
anchor_right = 1.0
anchor_bottom = 0.95
grow_horizontal = 2
grow_vertical = 0

[node name="Control2" type="Control" parent="Ui/Control/UiInfo"]
layout_mode = 1
anchor_left = 0.1
anchor_top = 0.8
anchor_right = 0.7
anchor_bottom = 0.9
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("5_c1pb6")

[node name="HBoxContainer" type="HBoxContainer" parent="Ui/Control/UiInfo/Control2"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/separation = 30

[node name="HBoxContainer2" type="HBoxContainer" parent="Ui/Control/UiInfo/Control2/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_stretch_ratio = 0.2

[node name="Control" type="Control" parent="Ui/Control/UiInfo/Control2/HBoxContainer/HBoxContainer2"]
layout_mode = 2
size_flags_horizontal = 3

[node name="TextureRect" type="TextureRect" parent="Ui/Control/UiInfo/Control2/HBoxContainer/HBoxContainer2/Control"]
layout_mode = 1
anchors_preset = 13
anchor_left = 0.5
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -13.5
offset_right = 13.5
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 3
size_flags_vertical = 3
texture = ExtResource("8_mngbo")
expand_mode = 3
stretch_mode = 5

[node name="ProgressBar" type="ProgressBar" parent="Ui/Control/UiInfo/Control2/HBoxContainer/HBoxContainer2/Control/TextureRect"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 6
size_flags_vertical = 1
size_flags_stretch_ratio = 0.35
fill_mode = 2
show_percentage = false

[node name="HBoxContainer" type="HBoxContainer" parent="Ui/Control/UiInfo/Control2/HBoxContainer"]
layout_mode = 2
alignment = 1

[node name="Label" type="Label" parent="Ui/Control/UiInfo/Control2/HBoxContainer/HBoxContainer"]
layout_mode = 2
text = "0/3"

[node name="TextureRect" type="TextureRect" parent="Ui/Control/UiInfo/Control2/HBoxContainer/HBoxContainer"]
layout_mode = 2
texture = ExtResource("9_e1cbu")

[node name="TextureProgressBar" type="TextureProgressBar" parent="Ui/Control/UiInfo/Control2/HBoxContainer"]
texture_filter = 1
layout_mode = 2
size_flags_horizontal = 3
size_flags_stretch_ratio = 0.15
value = 70.0
nine_patch_stretch = true
texture_under = SubResource("AtlasTexture_4w45t")
texture_progress = SubResource("AtlasTexture_r6p65")

[node name="EndScreen" type="Control" parent="Ui/Control"]
visible = false
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="Panel" type="Panel" parent="Ui/Control/EndScreen"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_styles/panel = SubResource("StyleBoxFlat_r6p65")

[node name="Control" type="Control" parent="Ui/Control/EndScreen"]
layout_mode = 1
anchor_left = 0.4
anchor_top = 0.4
anchor_right = 0.6
anchor_bottom = 0.6

[node name="VBoxContainer" type="VBoxContainer" parent="Ui/Control/EndScreen/Control"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_bottom = 74.0
grow_horizontal = 2
grow_vertical = 2
alignment = 1

[node name="Label" type="Label" parent="Ui/Control/EndScreen/Control/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3
theme_override_font_sizes/font_size = 28
text = "Game Over"
horizontal_alignment = 1
vertical_alignment = 1

[node name="Button" type="Button" parent="Ui/Control/EndScreen/Control/VBoxContainer"]
layout_mode = 2
size_flags_horizontal = 4
text = "Restart"

[node name="InvertColorManager" type="Node" parent="."]
script = ExtResource("6_rt2n2")
overlay_path = NodePath("../CanvasLayer/ColorRect")

[node name="ClickSound" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource("7_c16ls")
